syntax = "proto3";

package message;

option go_package = "/message";

message Wrapper {
    oneof MessageType {
        DirChange dirChange = 1;
        CreateBullet createBullet = 2;
        GameState gameState = 3;
        GameCount gameCount = 4;
        GameInit gameInit = 5;
    }
}

// server → client : init message
message GameInit {
    string id = 1;  // player id
}

// client → server : changing state
message DirChange {
    float angle = 1;
    bool isMoved = 2;
}

// server → client
message GameState {
    repeated PlayerState playerState = 1;
    repeated BulletState bulletState = 2;
}

message PlayerState {
    string id = 1;
    float x = 2;
    float y = 3;
}

message CreateBullet {
    string playerId = 1;
    float startX = 2;
    float startY = 3;
    float angle = 4;
}

message BulletState {
    string bulletId = 1;
    float x = 2;
    float y = 3;
}

message GameCount {
    int32 count = 1;
}